import subprocess
import platform
import os

ADB_DOWNLOAD_URL = "https://dl.google.com/android/repository/platform-tools-latest-linux.zip"

def check_adb_installed():
    try:
        subprocess.run(['adb'], stdout=subprocess.PIPE, stderr=subprocess.PIPE, check=True, text=True)
        return True
    except subprocess.CalledProcessError:
        return False

def install_adb():
    print("ADB is not installed. Downloading and installing...")

    # Check if the user has superuser permissions
    if not is_super_user():
        print("You need superuser (sudo) permissions to install ADB.")
        return

    # Download ADB
    download_command = ['wget', ADB_DOWNLOAD_URL]
    subprocess.run(download_command, check=True)

    # Unzip and move ADB to /usr/local/bin
    unzip_command = ['unzip', '-d', '/usr/local/bin', 'platform-tools-latest-linux.zip']
    subprocess.run(unzip_command, check=True)

    # Clean up the downloaded zip file
    os.remove('platform-tools-latest-linux.zip')

    print("ADB installed successfully.")

def is_super_user():
    try:
        return os.geteuid() == 0
    except AttributeError:
        return False

def main():
    if check_adb_installed():
        print("ADB is already installed. OK.")
    else:
        install_adb()

if __name__ == "__main__":
    main()
        
        
        
